{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/1/Downloads/web-application-development%20%281%29/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nexport const prisma = new PrismaClient();\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,SAAS,IAAI,6IAAY"}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/1/Downloads/web-application-development%20%281%29/auth.ts"],"sourcesContent":["// auth.ts\nimport NextAuth, { type AuthOptions } from \"next-auth\"\nimport CredentialsProvider from \"next-auth/providers/credentials\"\nimport { prisma } from \"@/lib/prisma\"\nimport bcrypt from \"bcryptjs\"\n\nexport const authOptions: AuthOptions = {\n    providers: [\n        CredentialsProvider({\n            name: \"Credentials\",\n            credentials: {\n                email: { label: \"Email\", type: \"email\" },\n                password: { label: \"Password\", type: \"password\" },\n            },\n            async authorize(credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null\n                }\n\n                const user = await prisma.user.findUnique({\n                    where: { email: credentials.email as string },\n                })\n\n                if (!user || !user.password) {\n                    return null\n                }\n\n                const isPasswordValid = await bcrypt.compare(\n                    credentials.password as string,\n                    user.password\n                )\n\n                if (!isPasswordValid) {\n                    return null\n                }\n\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: `${user.firstName} ${user.lastName}`,\n                    role: user.role,\n                }\n            },\n        }),\n    ],\n    pages: {\n        signIn: \"/login\",\n        error: \"/login\",\n    },\n    callbacks: {\n        async jwt({ token, user }) {\n            if (user) {\n                token.role = (user as any).role\n                token.id = user.id\n            }\n            return token\n        },\n        async session({ session, token }) {\n            if (session.user) {\n                ;(session.user as any).role = token.role\n                ;(session.user as any).id = token.id\n            }\n            return session\n        },\n    },\n    session: {\n        strategy: \"jwt\",\n    },\n}\n\nexport default NextAuth(authOptions)"],"names":[],"mappings":"AAAA,UAAU;;;;;;;AACV;AACA;AACA;AACA;;;;;AAEO,MAAM,cAA2B;IACpC,WAAW;QACP,IAAA,iRAAmB,EAAC;YAChB,MAAM;YACN,aAAa;gBACT,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YACpD;YACA,MAAM,WAAU,WAAW;gBACvB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBAC/C,OAAO;gBACX;gBAEA,MAAM,OAAO,MAAM,yHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACtC,OAAO;wBAAE,OAAO,YAAY,KAAK;oBAAW;gBAChD;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE;oBACzB,OAAO;gBACX;gBAEA,MAAM,kBAAkB,MAAM,mMAAM,CAAC,OAAO,CACxC,YAAY,QAAQ,EACpB,KAAK,QAAQ;gBAGjB,IAAI,CAAC,iBAAiB;oBAClB,OAAO;gBACX;gBAEA,OAAO;oBACH,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,GAAG,KAAK,SAAS,CAAC,CAAC,EAAE,KAAK,QAAQ,EAAE;oBAC1C,MAAM,KAAK,IAAI;gBACnB;YACJ;QACJ;KACH;IACD,OAAO;QACH,QAAQ;QACR,OAAO;IACX;IACA,WAAW;QACP,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACrB,IAAI,MAAM;gBACN,MAAM,IAAI,GAAG,AAAC,KAAa,IAAI;gBAC/B,MAAM,EAAE,GAAG,KAAK,EAAE;YACtB;YACA,OAAO;QACX;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC5B,IAAI,QAAQ,IAAI,EAAE;;gBACZ,QAAQ,IAAI,CAAS,IAAI,GAAG,MAAM,IAAI;gBACtC,QAAQ,IAAI,CAAS,EAAE,GAAG,MAAM,EAAE;YACxC;YACA,OAAO;QACX;IACJ;IACA,SAAS;QACL,UAAU;IACd;AACJ;uCAEe,IAAA,8PAAQ,EAAC"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/1/Downloads/web-application-development%20%281%29/app/api/patients/route.ts"],"sourcesContent":["// app/api/patients/route.ts\nimport { prisma } from \"@/lib/prisma\"\nimport { getServerSession } from \"next-auth\"\nimport { authOptions } from \"@/auth\"\nimport { type NextRequest, NextResponse } from \"next/server\"\n\nexport async function GET(req: NextRequest) {\n    try {\n        console.log(\"üîç Starting patients API call...\")\n\n        const session = await getServerSession(authOptions)\n        console.log(\"üîç Session:\", session)\n\n        if (!session) {\n            console.log(\"‚ùå No session found\")\n            return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n        }\n\n        const searchParams = req.nextUrl.searchParams\n        const userId = searchParams.get(\"userId\")\n        const email = searchParams.get(\"search\")\n\n        console.log(\"üîç Query params:\", { userId, email })\n\n        const where: any = {}\n\n        if (userId) {\n            where.userId = userId\n        }\n\n        if (email) {\n            where.user = { email: { contains: email, mode: 'insensitive' } }\n        }\n\n        console.log(\"üîç Prisma where clause:\", where)\n\n        const patients = await prisma.patient.findMany({\n            where,\n            include: {\n                user: {\n                    select: {\n                        id: true,\n                        email: true,\n                        firstName: true,\n                        lastName: true,\n                        phone: true,\n                    },\n                },\n            },\n            take: 100,\n        })\n\n        console.log(\"‚úÖ Patients found:\", patients.length)\n        return NextResponse.json(patients)\n\n    } catch (error) {\n        console.error(\"‚ùå Error fetching patients:\", error)\n        return NextResponse.json(\n            { error: \"Failed to fetch patients: \" + (error as Error).message },\n            { status: 500 }\n        )\n    }\n}"],"names":[],"mappings":"AAAA,4BAA4B;;;;;AAC5B;AACA;AACA;AACA;;;;;AAEO,eAAe,IAAI,GAAgB;IACtC,IAAI;QACA,QAAQ,GAAG,CAAC;QAEZ,MAAM,UAAU,MAAM,IAAA,uQAAgB,EAAC,qHAAW;QAClD,QAAQ,GAAG,CAAC,eAAe;QAE3B,IAAI,CAAC,SAAS;YACV,QAAQ,GAAG,CAAC;YACZ,OAAO,+QAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACtE;QAEA,MAAM,eAAe,IAAI,OAAO,CAAC,YAAY;QAC7C,MAAM,SAAS,aAAa,GAAG,CAAC;QAChC,MAAM,QAAQ,aAAa,GAAG,CAAC;QAE/B,QAAQ,GAAG,CAAC,oBAAoB;YAAE;YAAQ;QAAM;QAEhD,MAAM,QAAa,CAAC;QAEpB,IAAI,QAAQ;YACR,MAAM,MAAM,GAAG;QACnB;QAEA,IAAI,OAAO;YACP,MAAM,IAAI,GAAG;gBAAE,OAAO;oBAAE,UAAU;oBAAO,MAAM;gBAAc;YAAE;QACnE;QAEA,QAAQ,GAAG,CAAC,2BAA2B;QAEvC,MAAM,WAAW,MAAM,yHAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;YAC3C;YACA,SAAS;gBACL,MAAM;oBACF,QAAQ;wBACJ,IAAI;wBACJ,OAAO;wBACP,WAAW;wBACX,UAAU;wBACV,OAAO;oBACX;gBACJ;YACJ;YACA,MAAM;QACV;QAEA,QAAQ,GAAG,CAAC,qBAAqB,SAAS,MAAM;QAChD,OAAO,+QAAY,CAAC,IAAI,CAAC;IAE7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,+QAAY,CAAC,IAAI,CACpB;YAAE,OAAO,+BAA+B,AAAC,MAAgB,OAAO;QAAC,GACjE;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}