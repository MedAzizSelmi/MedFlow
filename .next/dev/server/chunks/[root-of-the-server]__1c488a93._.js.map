{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/1/Downloads/web-application-development%20%281%29/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nexport const prisma = new PrismaClient();\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,SAAS,IAAI,6IAAY"}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/1/Downloads/web-application-development%20%281%29/auth.ts"],"sourcesContent":["// auth.ts\nimport NextAuth, { type AuthOptions } from \"next-auth\"\nimport CredentialsProvider from \"next-auth/providers/credentials\"\nimport { prisma } from \"@/lib/prisma\"\nimport bcrypt from \"bcryptjs\"\n\nexport const authOptions: AuthOptions = {\n    providers: [\n        CredentialsProvider({\n            name: \"Credentials\",\n            credentials: {\n                email: { label: \"Email\", type: \"email\" },\n                password: { label: \"Password\", type: \"password\" },\n            },\n            async authorize(credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null\n                }\n\n                const user = await prisma.user.findUnique({\n                    where: { email: credentials.email as string },\n                })\n\n                if (!user || !user.password) {\n                    return null\n                }\n\n                const isPasswordValid = await bcrypt.compare(\n                    credentials.password as string,\n                    user.password\n                )\n\n                if (!isPasswordValid) {\n                    return null\n                }\n\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: `${user.firstName} ${user.lastName}`,\n                    role: user.role,\n                }\n            },\n        }),\n    ],\n    pages: {\n        signIn: \"/login\",\n        error: \"/login\",\n    },\n    callbacks: {\n        async jwt({ token, user }) {\n            if (user) {\n                token.role = (user as any).role\n                token.id = user.id\n            }\n            return token\n        },\n        async session({ session, token }) {\n            if (session.user) {\n                ;(session.user as any).role = token.role\n                ;(session.user as any).id = token.id\n            }\n            return session\n        },\n    },\n    session: {\n        strategy: \"jwt\",\n    },\n}\n\nexport default NextAuth(authOptions)"],"names":[],"mappings":"AAAA,UAAU;;;;;;;AACV;AACA;AACA;AACA;;;;;AAEO,MAAM,cAA2B;IACpC,WAAW;QACP,IAAA,iRAAmB,EAAC;YAChB,MAAM;YACN,aAAa;gBACT,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YACpD;YACA,MAAM,WAAU,WAAW;gBACvB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBAC/C,OAAO;gBACX;gBAEA,MAAM,OAAO,MAAM,yHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACtC,OAAO;wBAAE,OAAO,YAAY,KAAK;oBAAW;gBAChD;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE;oBACzB,OAAO;gBACX;gBAEA,MAAM,kBAAkB,MAAM,mMAAM,CAAC,OAAO,CACxC,YAAY,QAAQ,EACpB,KAAK,QAAQ;gBAGjB,IAAI,CAAC,iBAAiB;oBAClB,OAAO;gBACX;gBAEA,OAAO;oBACH,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,GAAG,KAAK,SAAS,CAAC,CAAC,EAAE,KAAK,QAAQ,EAAE;oBAC1C,MAAM,KAAK,IAAI;gBACnB;YACJ;QACJ;KACH;IACD,OAAO;QACH,QAAQ;QACR,OAAO;IACX;IACA,WAAW;QACP,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACrB,IAAI,MAAM;gBACN,MAAM,IAAI,GAAG,AAAC,KAAa,IAAI;gBAC/B,MAAM,EAAE,GAAG,KAAK,EAAE;YACtB;YACA,OAAO;QACX;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC5B,IAAI,QAAQ,IAAI,EAAE;;gBACZ,QAAQ,IAAI,CAAS,IAAI,GAAG,MAAM,IAAI;gBACtC,QAAQ,IAAI,CAAS,EAAE,GAAG,MAAM,EAAE;YACxC;YACA,OAAO;QACX;IACJ;IACA,SAAS;QACL,UAAU;IACd;AACJ;uCAEe,IAAA,8PAAQ,EAAC"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/1/Downloads/web-application-development%20%281%29/lib/auth-utils.ts"],"sourcesContent":["import  auth  from \"@/auth\"\n\nexport async function getSession() {\n  return await auth()\n}\n\nexport async function getCurrentUser() {\n  const session = await getSession()\n  return session?.user\n}\n\nexport async function requireAuth() {\n  const session = await getSession()\n  if (!session) {\n    throw new Error(\"Authentication required\")\n  }\n  return session\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,eAAe;IACpB,OAAO,MAAM,IAAA,iHAAI;AACnB;AAEO,eAAe;IACpB,MAAM,UAAU,MAAM;IACtB,OAAO,SAAS;AAClB;AAEO,eAAe;IACpB,MAAM,UAAU,MAAM;IACtB,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/1/Downloads/web-application-development%20%281%29/app/api/consultations/route.ts"],"sourcesContent":["import { prisma } from \"@/lib/prisma\"\nimport { requireAuth } from \"@/lib/auth-utils\"\nimport { type NextRequest, NextResponse } from \"next/server\"\n\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await requireAuth()\n    const searchParams = req.nextUrl.searchParams\n    const patientId = searchParams.get(\"patientId\")\n    const doctorId = searchParams.get(\"doctorId\")\n\n    const where: any = {}\n    if (patientId) where.patientId = patientId\n    if (doctorId) where.doctorId = doctorId\n\n    const consultations = await prisma.consultation.findMany({\n      where,\n      include: {\n        appointment: {\n          include: {\n            service: true,\n          },\n        },\n        patient: {\n          include: {\n            user: { select: { firstName: true, lastName: true } },\n          },\n        },\n        doctor: {\n          include: {\n            user: { select: { firstName: true, lastName: true } },\n          },\n        },\n        prescriptions: true,\n      },\n      orderBy: { createdAt: \"desc\" },\n    })\n\n    return NextResponse.json(consultations)\n  } catch (error) {\n    return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n}\n\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await requireAuth()\n    const data = await req.json()\n\n    const consultation = await prisma.consultation.create({\n      data: {\n        appointmentId: data.appointmentId,\n        patientId: data.patientId,\n        doctorId: data.doctorId,\n        diagnosis: data.diagnosis,\n        symptoms: data.symptoms,\n        treatment: data.treatment,\n        notes: data.notes,\n        followUpDate: data.followUpDate ? new Date(data.followUpDate) : undefined,\n      },\n      include: {\n        appointment: true,\n        prescriptions: true,\n      },\n    })\n\n    // Update appointment status to COMPLETED\n    await prisma.appointment.update({\n      where: { id: data.appointmentId },\n      data: { status: \"COMPLETED\" },\n    })\n\n    return NextResponse.json(consultation, { status: 201 })\n  } catch (error) {\n    return NextResponse.json({ error: \"Failed to create consultation\" }, { status: 400 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEO,eAAe,IAAI,GAAgB;IACxC,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,qIAAW;QACjC,MAAM,eAAe,IAAI,OAAO,CAAC,YAAY;QAC7C,MAAM,YAAY,aAAa,GAAG,CAAC;QACnC,MAAM,WAAW,aAAa,GAAG,CAAC;QAElC,MAAM,QAAa,CAAC;QACpB,IAAI,WAAW,MAAM,SAAS,GAAG;QACjC,IAAI,UAAU,MAAM,QAAQ,GAAG;QAE/B,MAAM,gBAAgB,MAAM,yHAAM,CAAC,YAAY,CAAC,QAAQ,CAAC;YACvD;YACA,SAAS;gBACP,aAAa;oBACX,SAAS;wBACP,SAAS;oBACX;gBACF;gBACA,SAAS;oBACP,SAAS;wBACP,MAAM;4BAAE,QAAQ;gCAAE,WAAW;gCAAM,UAAU;4BAAK;wBAAE;oBACtD;gBACF;gBACA,QAAQ;oBACN,SAAS;wBACP,MAAM;4BAAE,QAAQ;gCAAE,WAAW;gCAAM,UAAU;4BAAK;wBAAE;oBACtD;gBACF;gBACA,eAAe;YACjB;YACA,SAAS;gBAAE,WAAW;YAAO;QAC/B;QAEA,OAAO,+QAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,qIAAW;QACjC,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,MAAM,eAAe,MAAM,yHAAM,CAAC,YAAY,CAAC,MAAM,CAAC;YACpD,MAAM;gBACJ,eAAe,KAAK,aAAa;gBACjC,WAAW,KAAK,SAAS;gBACzB,UAAU,KAAK,QAAQ;gBACvB,WAAW,KAAK,SAAS;gBACzB,UAAU,KAAK,QAAQ;gBACvB,WAAW,KAAK,SAAS;gBACzB,OAAO,KAAK,KAAK;gBACjB,cAAc,KAAK,YAAY,GAAG,IAAI,KAAK,KAAK,YAAY,IAAI;YAClE;YACA,SAAS;gBACP,aAAa;gBACb,eAAe;YACjB;QACF;QAEA,yCAAyC;QACzC,MAAM,yHAAM,CAAC,WAAW,CAAC,MAAM,CAAC;YAC9B,OAAO;gBAAE,IAAI,KAAK,aAAa;YAAC;YAChC,MAAM;gBAAE,QAAQ;YAAY;QAC9B;QAEA,OAAO,+QAAY,CAAC,IAAI,CAAC,cAAc;YAAE,QAAQ;QAAI;IACvD,EAAE,OAAO,OAAO;QACd,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAgC,GAAG;YAAE,QAAQ;QAAI;IACrF;AACF"}}]
}